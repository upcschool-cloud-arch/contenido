# App exploration

This workshop is based on a classic application, [PetClinc](https://spring-petclinic.github.io/).
To properly understand the automation process of deploying this application, it is useful to get
yourself familiar with the technology behind it.

It is a Java application. But, really, don't worry: it won't hurt. You will basically invoke
[maven](https://maven.apache.org/) (a more sophisticated `make` alternative) to execute several
goals, that can roughly be associated to pipeline stages.

This lab includes quite a few `ls` commands. Probably you are going to find those steps much
more interesting if you use your editor to visually explore the directories.

## Preparation

* Install Java, version 17

```bash
sudo apt update
sudo apt install openjdk-17-jdk jq -y 
```

## Application exploration

* Get the source code of the application

```bash
git clone https://github.com/spring-projects/spring-petclinic 
cd spring-petclinic 
```

* Compile the source code

```bash
./mvnw compile
```

* Check the newly created directory `target`, where you will find the results
of the execution of each phase. In this case, there is a directory with the
generated binaries

```bash
ls -R target/classes/
```

* Execute the unit tests. Unfortunately, in this particular project there
is no clear separation between *unit tests* and *integration tests*:

```bash
./mvnw test
```

* Check the artifacts generated by this command, containing the result of the tests

```bash
ls target/surefire-reports/
cat target/surefire-reports/org.springframework.samples.petclinic.vet.VetTests.txt
```

* Use a *maven plugin* to convert those files into a much more friendly website

```bash
./mvnw surefire-report:report-only 
```

* The content of the test report will appear in the `target/site/` directory

```bash
ls target/site/surefire-report.html
```

* Also, it is possible to generate a *test coverage* report that should help to understand what
is the trend regarding test evolution:

```bash
./mvnw jacoco:report 
```

* Check the report looking in `target/site` directory:

```bash
ls target/site/jacoco/*
```

* Generate the technical documentation of the project

```bash
./mvnw javadoc:javadoc 
```

* The [javadoc](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javadoc.html) website will be
created under `target/site/apidocs`

```bash
ls target/site/apidocs/*
```

* Now, build the main artifact: the executable file containing of the application

```bash
./mvnw package -Dmaven.test.skip=true -Dmaven.skipUTs=true
```

* You will find the Java executable file under the `target` directory. This file should be stored in an
*artifact repository*, to make the deployment of the application independant from its building process

```bash
ls target/*.jar -lh
```

